:revealjs_controls: false
:revealjs_history: true
:hash: #
:example-caption!:
ifndef::imagesdir[:imagesdir: images]
ifndef::sourcedir[:sourcedir: ../../main/java]

= Distributed Saga Transactions

== Master thesis

[quote]
____
Use of Transactions within a Reactive Microservices Environment
____

https://issues.jboss.org/browse/JBTM-2920

[NOTE.speaker]
--
- name, studies, RedHat
- investigation thesis
- outline - general introduction + what I did / going to do
--

== Microservices architecture

image::fowlerMS.png[size=70%]

[NOTE.speaker]
--
- developed, tested, scaled and deployed independently
- public API / interface
- faster and more stable releases
--

== ACID transaction

[%step]
* Atomicity
* Consistency
* Isolation
* Durability

[NOTE.speaker]
--
- inseparable sequence of operations
- all or nothing property
- end in two states - committed or aborted
- atomicity - all operation performed as a single operation
- isolation levels
--

== Distributed transactions

[%step]
* Two phase commit protocol
  - O(n^2) messages
  - blocking
  - coordinator - single point of failure

== Saga pattern
[quote]
____
Hector Garcia-Molina and Kenneth Salem, Princeton Unversity, 1987
____

  - long lived transactions
  - compensations
  - eventual consistency

[NOTE.speaker]
--
- saga is a long lived transaction that can be written as
a sequence of transactions that can be interleaved
- all local transaction in the sequence must complete sucessfully or
compensating transations are ran to amend a partial execution
--

== !

image::2pc.png[background, size=70%]

== !

image::saga.png[background, size=70%]

== Saga investigation example

image::SagaModel.png[size=130%]

== Saga implementation investigations

[%step]
* http://www.axonframework.org[Axon framework]
* http://eventuate.io/[Eventuate.io]
* https://github.com/jbosstm/microprofile-sandbox/blob/master/proposals/0009-LRA/README.md[Narayana LRA]
* https://github.com/eventuate-tram/eventuate-tram-core[Eventuate Tram]
* http://jbossts.blogspot.cz/2017/12/saga-implementations-comparison.html[blog post]

== LRA executor extension

[%step]
* proof of concept / prototype
* LRA definition - asynchronous
* recovery capabilities
* scalability
* protocol/platform independent
* https://github.com/xstefank/lra-executor-extension


== Questions

== Thank you for your attention

mstefank@redhat.com

https://twitter.com/xstefank[@xstefank]

http://bit.ly/2ADRVfd


